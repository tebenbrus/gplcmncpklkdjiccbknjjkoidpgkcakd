"use strict"; (self.webpackChunkbrowser_extension = self.webpackChunkbrowser_extension || []).push([["main"], { 6048: (h, a, t) => { t.d(a, { O: () => e }); var o = t(4001); class e { constructor() { this.width = "100px", this.color = "#17a1ff" } ngOnInit() { } } e.\u0275fac = function (p) { return new (p || e) }, e.\u0275cmp = o.Xpm({ type: e, selectors: [["cls-spinner"]], inputs: { width: "width", color: "color" }, decls: 4, vars: 4, consts: [[1, "showbox"], [1, "loader"], ["viewBox", "25 25 50 50", 1, "circular"], ["cx", "50", "cy", "50", "r", "20", "fill", "none", "stroke-width", "2", "stroke-miterlimit", "10", 1, "path"]], template: function (p, i) { 1 & p && (o.TgZ(0, "div", 0), o.TgZ(1, "div", 1), o.O4$(), o.TgZ(2, "svg", 2), o._UZ(3, "circle", 3), o.qZA(), o.qZA(), o.qZA()), 2 & p && (o.xp6(1), o.Udp("width", i.width), o.xp6(2), o.Udp("stroke", i.color)) }, styles: ['.loader[_ngcontent-%COMP%]{position:relative;margin:0 auto;width:100%}.loader[_ngcontent-%COMP%]:before{content:"";display:block;padding-top:100%}.circular[_ngcontent-%COMP%]{animation:rotate 2s linear infinite;height:100%;transform-origin:center center;width:100%;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto}.path[_ngcontent-%COMP%]{stroke-dasharray:1,200;stroke-dashoffset:0;animation:dash 1.5s ease-in-out infinite;stroke-linecap:round}@keyframes rotate{to{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35px}to{stroke-dasharray:89,200;stroke-dashoffset:-124px}}'] }) }, 5658: (h, a, t) => { t.d(a, { F: () => u }); var o = t(8267), e = t(4001); class u { } u.\u0275fac = function (i) { return new (i || u) }, u.\u0275mod = e.oAB({ type: u }), u.\u0275inj = e.cJS({ imports: [[o.ez]] }) }, 9755: (h, a, t) => { var o, e; t.d(a, { h: () => o }), (e = o || (o = {})).AIScan = "ai-scan", e.Login = "login", e.Error = "error", e.ExtSubscriptionRequirement = "subscription-requirement" }, 9547: (h, a, t) => { var o; t.d(a, { $: () => o }), (o || (o = {})).User = "user" }, 6870: (h, a, t) => { var o, e; t.d(a, { F: () => o }), (e = o || (o = {})).RateLimit = "rate-limit", e.AiSubscriptionMissing = "ai-detection-disabled", e.OutOfCredits = "out-of-credits" }, 5936: (h, a, t) => { t.d(a, { l: () => m }); var o = t(8806), e = t(2555), u = t(9755), p = t(9547), i = t(4001), l = t(9252), x = t(3981); class m { constructor(c, v) { this._router = c, this._http = v } get user() { return this._user } isLoggedIn() { return !!this._user } initCurrentUserTokenAsync() { return (0, o.mG)(this, void 0, void 0, function* () { var c = yield this._http.get(`${e.N.extensionAPI}/auth`).toPromise(), v = {}; this._user = c, v[p.$.User] = c, yield chrome.storage.sync.set(v) }) } getUserAsync() { return (0, o.mG)(this, void 0, void 0, function* () { if (this._user) return this._user; const c = yield chrome.storage.sync.get(p.$.User); return this._user = c.user, this._user }) } logoutAsync() { return (0, o.mG)(this, void 0, void 0, function* () { this._user = null, yield chrome.storage.sync.clear(), this._router.navigate(["/" + u.h.Login], { replaceUrl: !0 }) }) } } m.\u0275fac = function (c) { return new (c || m)(i.LFG(l.F0), i.LFG(x.eN)) }, m.\u0275prov = i.Yz7({ token: m, factory: m.\u0275fac, providedIn: "root" }) }, 2555: (h, a, t) => { t.d(a, { N: () => o }); const o = { production: !0, extensionAPI: "https://app.copyleaks.com/api/browser-extension", dashboardWebsite: "https://app.copyleaks.com", mainWebsite: "https://copyleaks.com", identityWebsite: "https://id.copyleaks.com" } }, 4935: (h, a, t) => { var o = t(6219), e = t(4001), u = t(3981), p = t(5658), i = t(9252), l = t(9755), x = t(8806), m = t(9547); class g { constructor(n) { this._router = n } canActivate(n, s) { return (0, x.mG)(this, void 0, void 0, function* () { return !(yield chrome.storage.sync.get(m.$.User))[m.$.User] || (this._router.navigate(["/" + l.h.AIScan], { replaceUrl: !0 }), !1) }) } canActivateChild(n, s) { return this.canActivate(n, s) } } g.\u0275fac = function (n) { return new (n || g)(e.LFG(i.F0)) }, g.\u0275prov = e.Yz7({ token: g, factory: g.\u0275fac, providedIn: "root" }); class c { constructor(n) { this._router = n } canActivate(n, s) { return (0, x.mG)(this, void 0, void 0, function* () { return !!(yield chrome.storage.sync.get(m.$.User))[m.$.User] || (this._router.navigate(["/" + l.h.Login], { replaceUrl: !0 }), !1) }) } canActivateChild(n, s) { return this.canActivate(n, s) } } c.\u0275fac = function (n) { return new (n || c)(e.LFG(i.F0)) }, c.\u0275prov = e.Yz7({ token: c, factory: c.\u0275fac, providedIn: "root" }); const v = [{ path: "debugging", loadChildren: () => t.e("projects_browser-extension_src_app_pages_debugging-helper_debugging-helper_module_ts").then(t.bind(t, 8889)).then(r => r.DebuggingHelperModule) }, { path: l.h.AIScan, loadChildren: () => Promise.all([t.e("default-projects_browser-extension_src_app_components_ext-header_ext-header_component_ts-proj-ac64ab"), t.e("common"), t.e("projects_browser-extension_src_app_pages_scan-page_scan-page_module_ts")]).then(t.bind(t, 9845)).then(r => r.ScanPageModule), canActivate: [c] }, { path: l.h.ExtSubscriptionRequirement, loadChildren: () => Promise.all([t.e("default-projects_browser-extension_src_app_components_ext-header_ext-header_component_ts-proj-ac64ab"), t.e("common")]).then(t.bind(t, 1235)).then(r => r.ExtensionSubscriptionRequirementModesModule), canActivate: [c] }, { path: l.h.Error, loadChildren: () => Promise.all([t.e("default-projects_browser-extension_src_app_components_ext-header_ext-header_component_ts-proj-ac64ab"), t.e("projects_browser-extension_src_app_pages_error-page_error-page_module_ts")]).then(t.bind(t, 9785)).then(r => r.ErrorPageModule) }, { path: l.h.Login, loadChildren: () => t.e("projects_browser-extension_src_app_pages_login-page_login-page_module_ts").then(t.bind(t, 7297)).then(r => r.LoginPageModule), canActivate: [g] }]; class f { } f.\u0275fac = function (n) { return new (n || f) }, f.\u0275mod = e.oAB({ type: f }), f.\u0275inj = e.cJS({ imports: [[i.Bz.forRoot(v)], i.Bz] }); var O, C = t(5936), M = t(8267), P = t(6048); function L(r, n) { 1 & r && (e.ynx(0), e.TgZ(1, "div", 1), e._UZ(2, "cls-spinner"), e.qZA(), e.BQk()) } class E { constructor(n, s) { this._router = n, this._authService = s, this.isExtensionLoading = !0 } ngOnInit() { this._initAsync() } _initAsync() { return (0, x.mG)(this, void 0, void 0, function* () { let n = 0; try { (yield this._authService.getUserAsync()) || (n = 100, yield this._authService.initCurrentUserTokenAsync()), yield this._router.navigate(["/" + l.h.Login]) } catch (d) { yield this._router.navigate(["/" + l.h.Login]) } finally { setTimeout(() => { this.isExtensionLoading = !1 }, n) } }) } } E.\u0275fac = function (n) { return new (n || E)(e.Y36(i.F0), e.Y36(C.l)) }, E.\u0275cmp = e.Xpm({ type: E, selectors: [["app-root"]], decls: 3, vars: 3, consts: [[4, "ngIf"], [1, "ext-loader-contianer"]], template: function (n, s) { 1 & n && (e.TgZ(0, "div"), e._UZ(1, "router-outlet"), e.qZA(), e.YNc(2, L, 3, 0, "ng-container", 0)), 2 & n && (e.Udp("display", s.isExtensionLoading ? "none" : "block"), e.xp6(2), e.Q6J("ngIf", s.isExtensionLoading)) }, directives: [i.lC, M.O5, P.O], styles: [".ext-loader-contianer[_ngcontent-%COMP%]{width:510px;height:334px;display:flex;justify-content:center;align-items:center}"] }), (O || (O = {})).ReadOnlyReport = "read-only-report"; class y { constructor(n) { this._authService = n } intercept(n, s) { return this._authService.isLoggedIn() && (n = n.clone({ setHeaders: { Authorization: `Bearer ${this._authService.user.token}` } })), s.handle(n) } } y.\u0275fac = function (n) { return new (n || y)(e.LFG(C.l)) }, y.\u0275prov = e.Yz7({ token: y, factory: y.\u0275fac }); var S = t(5309), U = t(6870); class A { constructor(n, s, d) { this._authService = n, this._router = s, this._zone = d } intercept(n, s) { return s.handle(n).pipe((0, S.b)(() => { }, d => { 401 === d.status ? this._authService.logoutAsync() : 503 === d.status ? this._zone.run(() => { this._router.navigate(["/" + l.h.Error], { replaceUrl: !0, queryParams: { hideBottomMessage: !0, errormsg: "Site is under maintenance" } }) }) : 405 === d.status || d.status > 500 ? this._zone.run(() => { this._router.navigate(["/" + l.h.Error], { replaceUrl: !0, queryParams: { errormsg: "something went wrong, please try again later" } }) }) : 429 === d.status ? this._zone.run(() => { this._router.navigate(["/" + l.h.ExtSubscriptionRequirement], { replaceUrl: !0, queryParams: { reason: U.F.RateLimit } }) }) : 402 == d.status && this._zone.run(() => { this._router.navigate(["/" + l.h.ExtSubscriptionRequirement], { replaceUrl: !0, queryParams: { reason: U.F.OutOfCredits } }) }) })) } } A.\u0275fac = function (n) { return new (n || A)(e.LFG(C.l), e.LFG(i.F0), e.LFG(e.R0b)) }, A.\u0275prov = e.Yz7({ token: A, factory: A.\u0275fac }); class _ { } _.\u0275fac = function (n) { return new (n || _) }, _.\u0275mod = e.oAB({ type: _, bootstrap: [E] }), _.\u0275inj = e.cJS({ providers: [{ provide: u.TP, useClass: A, multi: !0 }, { provide: u.TP, useClass: y, multi: !0 }], imports: [[M.ez, o.b2, f, u.JF, p.F]] }), t(2555).N.production && (0, e.G48)(), o.q6().bootstrapModule(_).catch(r => console.error(r)) } }, h => { h.O(0, ["vendor"], () => { return o = 4935, h(h.s = o); var o }); h.O() }]);
//# sourceMappingURL=main.js.map